<div class="page page-extra pull-to-header">
  <ol class="breadcrumb bg-white">
    <li><a ui-sref="dashboard">Inicio</a></li>
    <li class="active">Tienda</li>
  </ol>
  <div class="row">
    <div class="col-md-12">
      <div class="tile p-15" ng-if="ctrl.modoSeleccionar">
        <section class="tile-header pl-0">
          <div class="row">
            <h1 class="heading text-center">{{ctrl.listaExcursiones[0].titulo_act}}</h1>
            <div class="col-md-12 f-18 mb text-info">{{ 'Text.SEL_PAQUETE' | translate }}</div>
            <div class="card-container col-lg-3 col-sm-6 col-sm-12" ng-repeat="item in ctrl.listaPaquetes">
                <div class="card" ng-click="ctrl.selPaquete(item.idpaquete)">
                  <div class="front text-center" ng-class="{'bg-lightred': item.selected, 'bg-greensea':!item.selected}">
                    <div class="row">
                      <!-- <div class="col-xs-4">
                        <i class="fa fa-shopping-cart fa-2x"></i>
                      </div> -->
                      <div class="col-xs-12">
                        <p class="text-lg line-lg text-strong">{{item.titulo_pq}}</p>
                        <!-- <span>New Users</span> -->
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xs-6">
                        <div><i class="fa fa-camera fa-2x"></i></div>
                        <div>{{item.cantidad}} fotos</div>
                      </div>
                      <div class="col-xs-6">
                        <div><i class="fa fa-usd fa-2x"></i></div>
                        <div>USD {{item.monto}}</div>
                      </div>
                    </div>
                  </div>
                  <div class="back text-center p-md" ng-class="{'bg-lightred': item.selected, 'bg-greensea':!item.selected}">
                    <div class="row">
                      <div class="col-xs-12" style="height: 25%">
                        <p class="text-lg line-lg text-strong">{{item.titulo_pq}}</p>
                        <p class="text-md line-md">{{item.cantidad}} fotos al precio de USD {{item.monto}}</p>
                      </div>
                      <div class="col-xs-6" style="height: 60%">
                        <a href=javascript:;><i class="fa fa-camera fa-2x"></i> + USD {{ctrl.listaExcursiones[0].precio_por_adicional}}</a>
                      </div>
                      <div class="col-xs-6" style="height: 60%">
                        <a href=javascript:;><i class="fa fa-video-camera fa-2x"></i> + USD {{ctrl.listaExcursiones[0].precio_video}}</a>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- <input type="radio" name="exc" ng-model=""> -->
            </div>

          </div>
          <div class="row">
            <div class="col-md-12 f-18 mb text-info">{{ 'Text.SEL_PRODUCTO' | translate }}</div>
          </div>
          <div class="controls">
            <!-- <div class="btn-group" uib-dropdown>
              <button class="btn btn-transparent" uib-dropdown-toggle><i class="fa fa-cog"></i></button>
              <ul class="dropdown-menu dropdown-menu-custom" uib-dropdown-menu role="menu">
                <li role="menuitem"><a href="javascript:;" minotaur-tile-minimize></a></li>
                <li role="menuitem"><a href="javascript:;"ng-click="ctrl.cargarGaleria();" minotaur-tile-refresh></a></li>
                <li role="menuitem"><a href="javascript:;" minotaur-tile-fullscreen></a></li>
                <li role="menuitem"><a href="javascript:;" minotaur-tile-lightbox></a></li>
              </ul>
            </div>
            <minotaur-tile-close></minotaur-tile-close> -->
          </div>
        </section>

        <ul class="mix-controls">
          <li class="select-all" ng-class="{'disabled': !ctrl.images.length}">
            <label class="checkbox minotaur-checkbox inline-block m-0" >{{ 'Text.TODOS' | translate }}
              <input type="checkbox" ng-model="selectedAll" ng-click="ctrl.selectAll()" ng-disabled="!ctrl.images.length"><div class="input-indicator"></div>
            </label>
          </li>

          <li class="btn" ng-class="{'disabled': !ctrl.isSelected}" ng-click='ctrl.confirmDescarga();'>
            <a href="javascript:;"><i class="halcyon-icon-next" ></i> {{ 'Form.NEXT' | translate }}</a>
          </li>

         <!--  <li class="pull-right select-all" style="font-size: 15px;font-weight: 600">
            <i class="fa fa-shopping-cart" ></i> <span style="color:#1199d3;">{{ctrl.monto_total}}</span></a>
          </li> -->
        </ul>

        <div class="row mix-grid" masonry>
          <div class="gallery" ng-mixitup magnific-popup="{
            delegate: 'a.img-preview',
            type: 'image',
            tLoading: 'Loading image #%curr%...',
            mainClass: 'mfp-img-mobile',
            gallery: {
              enabled: true,
              navigateByImgClick: true,
              preload: [0,1]
            }
           }"
          >
            <div class="masonry-brick col-md-3 col-sm-6 m-20 mix {{image.category}}" ng-class="{'selected': image.selected}" ng-repeat="image in ctrl.images">

              <div class="img-container ">
                <!-- <div class="ribbon-wrapper-green" ng-if="image.descargado == 1"><div class="ribbon-green">SOLD!</div></div> -->
                <img class="img-responsive" ng-src="{{image.src}}" alt="">
                <div class="img-details-static">
                  <h4>{{image.title}}</h4>
                  <div class="img-controls">
                    <a href="javascript:;" class="img-select" ng-click="ctrl.selectImage($index)" ng-if="image.descargado == 2">
                      <i class="fa fa-square-o" ng-show="!image.selected"></i>
                      <i class="fa fa-check-square-o" ng-show="image.selected"></i>
                    </a>

                    <a class="img-preview" href="{{image.src}}" title="{{image.title}}">
                      <i class="fa fa-search"></i>
                    </a>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row waterMarkEmptyData" ng-show="!ctrl.images.length" style="position: relative; top: 0;">
          NO SE ENCONTRARON PRODUCTOS
        </div>
        <ul class="mix-controls">
          <li class="btn pull-right" ng-class="{'disabled': !ctrl.isSelected}" ng-click='ctrl.confirmDescarga();'>
            <a href="javascript:;"><i class="halcyon-icon-next" ></i> {{ 'Form.NEXT' | translate }}</a>
          </li>
        </ul>
      </div>

      <div class="tile p-15" ng-if="ctrl.modoPagar">
        <section class="tile-header pl-0">
          <h1 class="heading">Resumen</h1>
          <div class="controls">
            <div class="form-group pull-right" >
                <button class="btn btn-warning" style="font-size:14px;color:#fff;" ng-click="ctrl.btnVolver()">
                  <i class="halcyon-icon-back"></i> Regresar
                </button>
                <!-- <div class="pull-right mt-10 ml-10" style="font-size: 15px;font-weight: 600">
                  <i class="fa fa-shopping-cart" ></i> <span style="color:#1199d3;">{{ctrl.monto_total}}</span>
                </div> -->
            </div>
            <!-- <minotaur-tile-close></minotaur-tile-close> -->
          </div>
        </section>
        <div class="row mix-grid" masonry>
          <div class="gallery" ng-mixitup magnific-popup="{
            delegate: 'a.img-preview',
            type: 'image',
            tLoading: 'Loading image #%curr%...',
            mainClass: 'mfp-img-mobile',
            gallery: {
              enabled: true,
              navigateByImgClick: true,
              preload: [0,1]
            }
           }"
          >
            <div class="masonry-brick col-md-3 col-sm-4 mb-20 mix {{image.category}}" ng-class="{'selected': image.selected}" ng-repeat="image in ctrl.images" ng-if="image.selected">
              <div class="img-container">
                <img class="img-responsive" ng-src="{{image.src}}" alt="">

                <div class="otros-productos" ng-if="ctrl.datosVista.mostrar_productos">
                  <form class="form-inline">
                    <div class="form-group" ng-repeat="(ind, prod) in image.lista_productos" style="margin-bottom: 5px;">
                      <label for="cantidad" style="font-weight: 900;text-transform: capitalize;width: 70px;">{{prod.descripcion_tp}}: </label>
                      <input type="number" style="width: 75px;margin-right: 10px;" class="form-control" id="cantidad" name="cantidad" ng-model="prod.cantidad" ng-change="ctrl.updatePrecio(prod);" >
                      <label >{{prod.precio}}</label>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="text-right" style=" margin:20px auto;width:200px">
          <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="true">Paquete {{ctrl.paqueteSeleccionado.titulo_pq}}: {{ctrl.monto}}</p>
          <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="true">Foto Adicional ({{ctrl.cantidad_adic}} x {{ctrl.precio_adicional}}$): {{ctrl.monto_adicionales}}</p>

          <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="true">Video Adicional ({{ctrl.cantidad_video}} x {{ctrl.precio_video}}$): {{ctrl.monto_adicionales_video}}</p>

          <!-- <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="ctrl.datosVista.tiene_bonificacion">Bonificacion: -{{ctrl.monto_bonificacion}}</p> -->
          <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="ctrl.datosVista.tiene_descuento">Descuento({{ctrl.datosVista.descuento.descuento}}%): -{{ctrl.monto_descuento}}</p>

          <p style="font-size: 16px;font-weight: bold;color:#1199d3;"
              ng-if="ctrl.datosVista.tiene_descuento">Total : {{ctrl.monto_total}}</p>

          <hr>
          <p style="font-size: 16px;font-weight: bold;color:#5cb85c;"
              ng-if="ctrl.datosVista.tiene_descuento">Saldo Inicial: {{fSessionCI.monedero}}</p>
          <p style="font-size: 16px;font-weight: bold;color:#1199d3;">Saldo Final: {{ctrl.restante}}</p>

          <p style="font-size: 16px;font-weight: bold;color:#1199d3;">Total a Pagar: {{ctrl.monto_a_pagar}}</p>
          <label class="checkbox minotaur-checkbox inline-block m-0">He leído y acepto los <a href="javascript:;" ng-click="ctrl.btnTerminosCondiciones();" >Términos y Condiciones</a>
            <input type="checkbox" ng-model="ctrl.selectedTerminos"><div class="input-indicator"></div>
          </label>
          <button class="btn btn-input-sm btn-success mt-5" type="button" ng-click="ctrl.btnValidar();">Pagar</button>

        </div>
        <!-- <div class="col-xs-12 pl-n">
        </div>

        <div class="col-xs-12 pl-n">
        </div> -->

      </div>

      <div class="tile p-15" style="min-height: 400px;" ng-if="ctrl.modoDescargaCompleta">
        <section class="tile-header pl-0">
          <h1 class="heading">Compra Exitosa</h1>
          <div class="controls">
            <!-- <div class="btn-group" uib-dropdown>
              <button class="btn btn-transparent" uib-dropdown-toggle><i class="fa fa-cog"></i></button>
              <ul class="dropdown-menu dropdown-menu-custom" uib-dropdown-menu role="menu">
                <li role="menuitem"><a href="javascript:;" minotaur-tile-minimize></a></li>
                <li role="menuitem"><a href="javascript:;"ng-click="ctrl.cargarGaleria();" minotaur-tile-refresh></a></li>
                <li role="menuitem"><a href="javascript:;" minotaur-tile-fullscreen></a></li>
                <li role="menuitem"><a href="javascript:;" minotaur-tile-lightbox></a></li>
              </ul>
            </div>
            <minotaur-tile-close></minotaur-tile-close> -->
          </div>
        </section>
        <div class="row">
          <div class="col-md-12 col-sm-12">
            <h2 class="text-custom text-center mb-5">Gracias por tu compra!</h2>
            <h3 ng-if="!ctrl.modoCalificacionOk" class="text-custom text-center text-cyan mt-0">Califica nuestro servicio.</h3>
            <h3 ng-if="ctrl.modoCalificacionOk" class="text-custom text-center text-cyan mt-0">Gracias por calificar nuestro servicio.</h3>
            <div class="rating-stars" ng-if="!ctrl.modoCalificacionOk" >
              <span ng-click="ctrl.calificar(5);" >☆</span>
              <span ng-click="ctrl.calificar(4);">☆</span>
              <span ng-click="ctrl.calificar(3);">☆</span>
              <span ng-click="ctrl.calificar(2);">☆</span>
              <span ng-click="ctrl.calificar(1);">☆</span>
            </div>
            <div class="rating-stars-calificado" ng-if="ctrl.modoCalificacionOk" >
              <span ng-class="{'califica': 1 <= ctrl.calificacion}">★</span>
              <span ng-class="{'califica': 2 <= ctrl.calificacion}">★</span>
              <span ng-class="{'califica': 3 <= ctrl.calificacion}">★</span>
              <span ng-class="{'califica': 4 <= ctrl.calificacion}">★</span>
              <span ng-class="{'califica': 5 == ctrl.calificacion}">★</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
